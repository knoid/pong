(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{167:function(t,e,o){t.exports={default:o(168),__esModule:!0}},168:function(t,e,o){var n=o(9),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},175:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(o(167)),i=l(o(176)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(75)),a=l(o(183));function l(t){return t&&t.__esModule?t:{default:t}}function r(t){return`${100*t}%`}function u({pos2D:t}){return s.h("div",{class:a.default.ball},s.h("div",{style:{left:r(t[0]),top:r(t[1])}}))}function c({pos:t}){return s.h("div",{class:a.default.paddle},s.h("div",{style:{left:r(t)}}))}class h extends s.Component{constructor(...t){var e;return e=super(...t),this.state={ballPos:[.5,.5],oponentPos:.5,playerPos:.5},this.onTouch=t=>{if(t.preventDefault(),t.touches.length>0){const e=t.touches[0].clientX/this.screenWidth;this.setState({playerPos:e}),this.send({position:e})}},this.updateBallPosition=()=>{const t=performance.now(),e=(t-(this.lastNow||t))/1e3;this.setState(({ballPos:t,playerPos:o})=>{(t[0]>=1||t[0]<=0)&&(this.ballVelocity[0]*=-1);const n=t[0]-o;if(t[1]>=1&&Math.abs(n)<.2){const t=(0,i.default)(this.ballVelocity,1)[0];this.ballVelocity[0]=(s=t+n/.2,a=-.45,l=.45,Math.max(a,Math.min(s,l))),this.ballVelocity[1]=Math.sqrt(Math.pow(.5,2)-Math.pow(t,2)),this.send({ballVelocity:this.ballVelocity}),this.ballVelocity[1]*=-1}var s,a,l;return{ballPos:[t[0]+this.ballVelocity[0]*e,t[1]+this.ballVelocity[1]*e]}}),this.lastNow=t,requestAnimationFrame(this.updateBallPosition)},this.ballVelocity=[0,0],this.gameState=1,e}componentWillMount(){this.screenWidth=window.innerWidth;const t=Math.random();this.props.dataChannel.onmessage=({data:e})=>{const o=JSON.parse(e);1===this.gameState&&o.coin&&(this.ballVelocity[1]=.5*Math.pow(-1,t>o.coin),this.gameState=2,requestAnimationFrame(this.updateBallPosition)),o.ballVelocity&&(this.setState(({ballPos:t})=>({ballPos:[t[0],0]})),this.ballVelocity=o.ballVelocity),o.position&&this.setState({oponentPos:o.position})},this.send({coin:t})}send(t){this.props.dataChannel.send((0,n.default)(t))}render(t,{oponentPos:e,playerPos:o,ballPos:n}){return s.h("div",{class:a.default.court,onTouchStart:this.onTouch,onTouchMove:this.onTouch},s.h(c,{pos:e}),s.h(u,{pos2D:n}),s.h(c,{pos:o}))}}e.default=h},176:function(t,e,o){"use strict";e.__esModule=!0;var n=s(o(177)),i=s(o(180));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var o=[],n=!0,s=!1,a=void 0;try{for(var l,r=(0,i.default)(t);!(n=(l=r.next()).done)&&(o.push(l.value),!e||o.length!==e);n=!0);}catch(t){s=!0,a=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw a}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},177:function(t,e,o){t.exports={default:o(178),__esModule:!0}},178:function(t,e,o){o(80),o(76),t.exports=o(179)},179:function(t,e,o){var n=o(53),i=o(1)("iterator"),s=o(14);t.exports=o(9).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||s.hasOwnProperty(n(e))}},180:function(t,e,o){t.exports={default:o(181),__esModule:!0}},181:function(t,e,o){o(80),o(76),t.exports=o(182)},182:function(t,e,o){var n=o(8),i=o(81);t.exports=o(9).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},183:function(t,e,o){t.exports={ball:"NAeP",court:"rX1Z",paddle:"ZC15"}}}]);
//# sourceMappingURL=pong.c7f78591bbf4f8befca3.js.map